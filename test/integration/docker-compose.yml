# docker-compose.yml
version: "3.4"

services:
  integration-test-mysql:
    image: mysql:8.0
    container_name: ${MY_SQL_CONTAINER_NAME}
    environment:
      - MYSQL_ROOT_PASSWORD=$MYSQL_ROOT_PASSWORD
    ports:
      - 3307:3306
    volumes:
      # - ./src/db:/usr/src/db #Mount db folder so we can run seed files etc.
      - ./src/seed.sql:/docker-entrypoint-initdb.d/seed.sql
    entrypoint: sh -c "
      echo 'CREATE SCHEMA IF NOT EXISTS gigs;' > /docker-entrypoint-initdb.d/init.sql;
      /usr/local/bin/docker-entrypoint.sh --default-authentication-plugin=mysql_native_password
      "
